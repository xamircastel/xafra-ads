{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "XAFRA-ADS APIs Collection",
		"description": "Collection completa de APIs para XAFRA-ADS Motor de Publicidad\n\nüåê **Dominio:** apis.xafra-ads.com\nüìä **Capacidad:** 10,000+ visitas diarias\nüîí **Base de Datos:** PostgreSQL en GCP\n\n**Endpoints principales:**\n- Procesamiento de Ads\n- Auto-suscripci√≥n masiva\n- Testing y monitoreo\n- Utilidades y compras\n\n**Fecha:** Septiembre 2025\n**Versi√≥n:** v2.1.0-production",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12345678"
	},
	"item": [
		{
			"name": "üöÄ Health Checks",
			"item": [
				{
					"name": "Spring Boot Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/actuator/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"actuator",
								"health"
							]
						},
						"description": "Health check de Spring Boot Actuator - Endpoint principal para verificar el estado de la aplicaci√≥n"
					},
					"response": []
				},
				{
					"name": "Database Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/db/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"db",
								"health"
							]
						},
						"description": "Health check completo de la base de datos PostgreSQL"
					},
					"response": []
				},
				{
					"name": "Simple Ping",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/ping",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"ping"
							]
						},
						"description": "Health check simple que responde 'pong'"
					},
					"response": []
				}
			],
			"description": "Endpoints para verificar el estado de la aplicaci√≥n y base de datos"
		},
		{
			"name": "üì± Procesamiento de Ads",
			"item": [
				{
					"name": "Procesar Ad - Product ID 1 ‚úÖ FUNCIONAL",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üöÄ Ejecutando: Procesar Ad - Product ID 1');",
									"console.log('‚è∞ Timestamp:', new Date().toISOString());",
									"console.log('üîê Par√°metro encriptado v√°lido: M85DjiEk4XszqaUk94vETA');",
									"pm.globals.set('current_tracking', 'TRACK_' + Date.now());"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200 or redirect (3xx)', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 301, 302, 303, 307, 308]);",
									"});",
									"pm.test('Response time is less than 3000ms', function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(3000);",
									"});",
									"console.log('‚úÖ Test completado para Product ID 1');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/ads/M85DjiEk4XszqaUk94vETA/?clickId={{tracking_id}}&utm_source=postman&utm_campaign=test",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"ads",
								"M85DjiEk4XszqaUk94vETA",
								""
							],
							"query": [
								{
									"key": "clickId",
									"value": "{{tracking_id}}",
									"description": "ID de tracking para la campa√±a"
								},
								{
									"key": "utm_source",
									"value": "postman",
									"description": "Fuente de tr√°fico"
								},
								{
									"key": "utm_campaign",
									"value": "test",
									"description": "Nombre de la campa√±a"
								}
							]
						},
						"description": "‚úÖ FUNCIONAL - Procesar ad para Product ID 1. Par√°metro encriptado v√°lido: M85DjiEk4XszqaUk94vETA. Confirmado funcionando en production."
					},
					"response": []
				},
				{
					"name": "Procesar Ad - Product ID 2 ‚úÖ FUNCIONAL",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üöÄ Ejecutando: Procesar Ad - Product ID 2');",
									"console.log('‚è∞ Timestamp:', new Date().toISOString());",
									"console.log('üîê Par√°metro encriptado v√°lido: hE6wiDK+BUKM2cSJgSshnQ');"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200 or redirect (3xx)', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 301, 302, 303, 307, 308]);",
									"});",
									"pm.test('Response time is less than 3000ms', function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(3000);",
									"});",
									"console.log('‚úÖ Test completado para Product ID 2');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/ads/hE6wiDK+BUKM2cSJgSshnQ/?clickId={{tracking_id}}&utm_source=postman&utm_campaign=test",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"ads",
								"hE6wiDK+BUKM2cSJgSshnQ",
								""
							],
							"query": [
								{
									"key": "clickId",
									"value": "{{tracking_id}}",
									"description": "ID de tracking para la campa√±a"
								},
								{
									"key": "utm_source",
									"value": "postman",
									"description": "Fuente de tr√°fico"
								},
								{
									"key": "utm_campaign",
									"value": "test",
									"description": "Nombre de la campa√±a"
								}
							]
						},
						"description": "‚úÖ FUNCIONAL - Procesar ad para Product ID 2. Par√°metro encriptado v√°lido: hE6wiDK+BUKM2cSJgSshnQ"
					},
					"response": []
				},
				{
					"name": "Procesar Ad - Product ID 3 ‚úÖ FUNCIONAL",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üöÄ Ejecutando: Procesar Ad - Product ID 3');",
									"console.log('‚è∞ Timestamp:', new Date().toISOString());",
									"console.log('üîê Par√°metro encriptado v√°lido: T0jgZrjniEHPS7u1ZB9UkA');"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200 or redirect (3xx)', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 301, 302, 303, 307, 308]);",
									"});",
									"pm.test('Response time is less than 3000ms', function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(3000);",
									"});",
									"console.log('‚úÖ Test completado para Product ID 3');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/ads/T0jgZrjniEHPS7u1ZB9UkA/?clickId={{tracking_id}}&utm_source=postman&utm_campaign=test",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"ads",
								"T0jgZrjniEHPS7u1ZB9UkA",
								""
							],
							"query": [
								{
									"key": "clickId",
									"value": "{{tracking_id}}",
									"description": "ID de tracking para la campa√±a"
								},
								{
									"key": "utm_source",
									"value": "postman",
									"description": "Fuente de tr√°fico"
								},
								{
									"key": "utm_campaign",
									"value": "test",
									"description": "Nombre de la campa√±a"
								}
							]
						},
						"description": "‚úÖ FUNCIONAL - Procesar ad para Product ID 3. Par√°metro encriptado v√°lido: T0jgZrjniEHPS7u1ZB9UkA"
					},
					"response": []
				},
				{
					"name": "Confirmar Conversi√≥n",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/ads/confirm/TRACK_001",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"ads",
								"confirm",
								"TRACK_001"
							]
						},
						"description": "Confirmar conversi√≥n y ejecutar postback autom√°tico"
					},
					"response": []
				},
				{
					"name": "Confirmar Conversi√≥n con API Key",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"conversion_data\": \"additional_info\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/ads/v1/confirm/{{api_key}}/TRACK_001",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"ads",
								"v1",
								"confirm",
								"{{api_key}}",
								"TRACK_001"
							]
						},
						"description": "Confirmaci√≥n autenticada con API key"
					},
					"response": []
				}
			],
			"description": "Endpoints para el procesamiento de anuncios y tracking de conversiones"
		},
		{
			"name": "üá®üá∑ Tracking Corto Costa Rica",
			"item": [
				{
					"name": "Configurar Tracking Corto",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üá®üá∑ Configurando tracking corto para Costa Rica - Kolbi...');",
									"console.log('üìä Endpoint: POST /api/config/xafra');",
									"console.log('üéØ Funcionalidad: Asignar tracking corto a campaign existente');"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.expect(pm.response.code).to.eql(200);",
									"});",
									"",
									"pm.test('Response has success field', function () {",
									"    pm.expect(pm.response.json()).to.have.property('success');",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    let responseJson = pm.response.json();",
									"    if (responseJson.success) {",
									"        console.log('‚úÖ Tracking corto configurado exitosamente');",
									"        console.log('üìç Original tracking:', responseJson.original_tracking);",
									"        console.log('üîó Short tracking:', responseJson.short_tracking);",
									"        console.log('üåç Pa√≠s:', responseJson.country);",
									"        console.log('üì° Operador:', responseJson.operator);",
									"        pm.globals.set('last_short_tracking', responseJson.short_tracking);",
									"    } else {",
									"        console.log('‚ùå Error:', responseJson.error);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": "Tipo de contenido JSON"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"apikey\": \"customer-api-key-example\",\n  \"original_tracking\": \"TRK123456789\",\n  \"short_tracking\": \"CR001\",\n  \"enabled\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/config/xafra",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"config",
								"xafra"
							]
						},
						"description": "**üá®üá∑ Endpoint para configurar tracking corto de Costa Rica - Kolbi**\n\n**Funcionalidad:**\n- Permite al customer asignar un tracking corto a un campaign existente\n- Solo funciona para productos de Costa Rica con operador Kolbi\n- Valida que el tracking original exista y sea v√°lido\n- Previene duplicados de tracking corto\n\n**Validaciones:**\n‚úÖ APIKey requerido\n‚úÖ Tracking original debe existir\n‚úÖ Solo para Costa Rica (CR) - Kolbi\n‚úÖ Tracking corto √∫nico\n‚úÖ Campaign en estado v√°lido\n\n**Respuesta exitosa:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Tracking corto configurado exitosamente\",\n  \"original_tracking\": \"TRK123456789\",\n  \"short_tracking\": \"CR001\",\n  \"country\": \"CR\",\n  \"operator\": \"Kolbi\"\n}\n```\n\n**Casos de uso:**\n1. Customer genera tracking corto para SMS\n2. Usuario env√≠a SMS con tracking corto a Kolbi\n3. Sistema puede procesar confirmaciones usando el tracking corto"
					},
					"response": []
				},
				{
					"name": "Confirmar Venta por Tracking Corto",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üá®üá∑ Procesando confirmaci√≥n por tracking corto...');",
									"console.log('üìä Endpoint: POST /service/v1/confirm/short/{apikey}/{shortTracking}');",
									"console.log('üéØ Funcionalidad: Confirmar venta usando tracking corto de Costa Rica');"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.expect(pm.response.code).to.eql(200);",
									"});",
									"",
									"pm.test('Response has success field', function () {",
									"    pm.expect(pm.response.json()).to.have.property('success');",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    let responseJson = pm.response.json();",
									"    if (responseJson.success) {",
									"        console.log('‚úÖ Venta confirmada exitosamente');",
									"        console.log('üîó Short tracking:', responseJson.short_tracking);",
									"        console.log('üìç Original tracking:', responseJson.original_tracking);",
									"        console.log('üÜî Campaign ID:', responseJson.campaign_id);",
									"        console.log('üåç Pa√≠s:', responseJson.country);",
									"        console.log('üì° Operador:', responseJson.operator);",
									"        console.log('‚è∞ Timestamp:', responseJson.timestamp);",
									"    } else {",
									"        console.log('‚ùå Error:', responseJson.error);",
									"    }",
									"} else {",
									"    console.log('‚ùå HTTP Error:', pm.response.code, pm.response.status);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/service/v1/confirm/short/customer-api-key-example/CR001",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"service",
								"v1",
								"confirm",
								"short",
								"customer-api-key-example",
								"CR001"
							]
						},
						"description": "**üá®üá∑ Endpoint para confirmar ventas usando tracking corto de Costa Rica - Kolbi**\n\n**Funcionalidad:**\n- Busca el campaign por tracking corto asignado\n- Valida que sea para Costa Rica - Kolbi\n- Procesa la confirmaci√≥n usando la l√≥gica existente del sistema\n- Actualiza el estado del campaign a CONFIRMED\n- Notifica al traffic source sobre la conversi√≥n\n\n**Par√°metros de URL:**\n- `{apikey}`: API key del customer para autenticaci√≥n\n- `{shortTracking}`: C√≥digo corto asignado al campaign (ej: \"CR001\", \"AB123\")\n\n**Validaciones:**\n‚úÖ APIKey requerido en URL\n‚úÖ Short tracking requerido en URL\n‚úÖ Tracking corto debe existir en BD\n‚úÖ Solo para Costa Rica (CR) - Kolbi\n‚úÖ Campaign en estado v√°lido para confirmaci√≥n\n\n**Respuesta exitosa:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Venta confirmada exitosamente\",\n  \"short_tracking\": \"CR001\",\n  \"original_tracking\": \"TRK123456789\",\n  \"campaign_id\": 12345,\n  \"country\": \"CR\",\n  \"operator\": \"Kolbi\",\n  \"timestamp\": \"2025-09-08T10:30:00Z\"\n}\n```\n\n**Flujo t√≠pico:**\n1. Usuario accede a URL de tracking ‚Üí Campaign creado\n2. Customer llama `/api/config/xafra` ‚Üí Tracking corto asignado\n3. Usuario env√≠a SMS con tracking corto ‚Üí Kolbi procesa\n4. Kolbi confirma a customer ‚Üí Customer llama este endpoint\n5. Sistema procesa confirmaci√≥n ‚Üí Traffic source notificado"
					},
					"response": []
				},
				{
					"name": "Informaci√≥n Costa Rica - Kolbi",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.expect(pm.response.code).to.eql(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    let responseJson = pm.response.json();",
									"    console.log('üá®üá∑ Informaci√≥n de Costa Rica - Kolbi:');",
									"    console.log('üìç C√≥digo pa√≠s:', responseJson.country_code);",
									"    console.log('üåç Nombre pa√≠s:', responseJson.country_name);",
									"    console.log('üì° Operador:', responseJson.operator);",
									"    console.log('üîó Tracking corto habilitado:', responseJson.short_tracking_enabled);",
									"    console.log('üìã Descripci√≥n:', responseJson.description);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/config/costa-rica-kolbi",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"config",
								"costa-rica-kolbi"
							]
						},
						"description": "**üá®üá∑ Endpoint informativo sobre la configuraci√≥n de Costa Rica - Kolbi**\n\n**Funcionalidad:**\n- Proporciona informaci√≥n sobre la configuraci√≥n espec√≠fica para Costa Rica\n- Muestra ejemplos de customer y product para Kolbi\n- Confirma que el tracking corto est√° habilitado\n- √ötil para validar la configuraci√≥n antes de implementar\n\n**Respuesta:**\n```json\n{\n  \"country_code\": \"CR\",\n  \"country_name\": \"Costa Rica\",\n  \"operator\": \"Kolbi\",\n  \"short_tracking_enabled\": true,\n  \"description\": \"Configuraci√≥n para tracking corto en Costa Rica - Kolbi\",\n  \"example_customer\": {\n    \"name\": \"Customer Costa Rica\",\n    \"country\": \"CR\",\n    \"operator\": \"Kolbi\"\n  },\n  \"example_product\": {\n    \"name\": \"SMS Premium CR\",\n    \"country\": \"CR\",\n    \"operator\": \"Kolbi\"\n  }\n}\n```\n\n**Uso:**\n- Verificar que el sistema est√° configurado para Costa Rica\n- Obtener ejemplos de configuraci√≥n correcta\n- Validar que el tracking corto est√° habilitado"
					},
					"response": []
				}
			],
			"description": "**üá®üá∑ Sistema de Tracking Corto para Costa Rica - Kolbi**\n\nEsta secci√≥n contiene los endpoints espec√≠ficos para el manejo de tracking corto en Costa Rica con el operador Kolbi. El sistema permite a los customers asignar c√≥digos cortos a sus campaigns para facilitar el proceso de confirmaci√≥n de ventas a trav√©s de SMS.\n\n**Caracter√≠sticas principales:**\n- ‚úÖ **Espec√≠fico por pa√≠s/operador:** Solo funciona para Costa Rica - Kolbi\n- ‚úÖ **Tracking flexible:** Soporte para c√≥digos cortos en SMS\n- ‚úÖ **Validaciones robustas:** APIKey, existencia de tracking, pa√≠s/operador\n- ‚úÖ **Integraci√≥n completa:** Usa la l√≥gica existente del sistema\n- ‚úÖ **Prevenci√≥n de duplicados:** Tracking corto √∫nico\n\n**Flujo completo:**\n1. Usuario accede a URL de tracking normal ‚Üí Campaign creado autom√°ticamente\n2. Customer usa `/api/config/xafra` ‚Üí Asigna tracking corto al campaign\n3. Usuario env√≠a SMS con tracking corto ‚Üí Kolbi procesa la suscripci√≥n\n4. Kolbi confirma a customer ‚Üí Customer usa `/service/v1/confirm/short/` ‚Üí Venta confirmada\n5. Sistema notifica al traffic source ‚Üí Conversi√≥n completada"
		},
		{
			"name": "ü§ñ Auto-Suscripci√≥n Masiva",
			"item": [
				{
					"name": "Iniciar Auto-Suscripci√≥n",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone_numbers\": [\"+50612345678\", \"+50687654321\"],\n    \"campaign_id\": \"CAMP001\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/auto/subscribe/PROD001/23/10/AA230/250",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"auto",
								"subscribe",
								"PROD001",
								"23",
								"10",
								"AA230",
								"250"
							]
						},
						"description": "Auto-suscripci√≥n masiva con multi-threading\n\nPar√°metros:\n- productId: ID del producto (PROD001)\n- hour: Hora de procesamiento (23 = 11 PM)\n- timeSleep: Tiempo entre requests en ms (10)\n- source: C√≥digo fuente (AA230)\n- limit: L√≠mite de n√∫meros a procesar (250)"
					},
					"response": []
				}
			],
			"description": "Sistema de auto-suscripci√≥n masiva con multi-threading"
		},
		{
			"name": "üîç Testing y Base de Datos",
			"item": [
				{
					"name": "Test Conexi√≥n BD",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/db/test-connection",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"db",
								"test-connection"
							]
						},
						"description": "Probar conectividad con PostgreSQL"
					},
					"response": []
				},
				{
					"name": "Test Acceso a Datos",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/db/test-data-access",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"db",
								"test-data-access"
							]
						},
						"description": "Probar acceso a datos con JDBI"
					},
					"response": []
				},
				{
					"name": "Test Campa√±as (2.9M+ registros)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/db/test-campaigns",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"v1",
								"db",
								"test-campaigns"
							]
						},
						"description": "Validar tabla campaigns con 2,970,685+ registros"
					},
					"response": []
				}
			],
			"description": "Endpoints para testing de conectividad y acceso a datos"
		},
		{
			"name": "üîß Utilidades",
			"item": [
				{
					"name": "Servicio de Encriptaci√≥n (Forma Correcta)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üîê Generando par√°metro encriptado...');",
									"console.log('‚è∞ Timestamp:', new Date().toISOString());"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.expect(pm.response.code).to.eql(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    let encryptedValue = pm.response.text();",
									"    console.log('‚úÖ Par√°metro encriptado generado:', encryptedValue);",
									"    console.log('üîó URL de ejemplo: {{base_url}}/ads/' + encryptedValue + '/?clickId=TRACK_001');",
									"    pm.globals.set('last_encrypted_param', encryptedValue);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "text/plain",
								"description": "Tipo de contenido en texto plano"
							},
							{
								"key": "user",
								"value": "xafra2-ads-encrytion3",
								"description": "Header de autenticaci√≥n requerido"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "1",
							"options": {
								"raw": {
									"language": "text"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/util/encryption",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"util",
								"encryption"
							]
						},
						"description": "‚úÖ CORREGIDO - Encriptaci√≥n AES para product_id. Env√≠a el product_id como texto plano en el body y devuelve el valor encriptado.\n\n**Uso Correcto:**\n- Body: product_id (ej: \"1\", \"2\", \"3\")\n- Header 'user': xafra2-ads-encrytion3\n- Content-Type: text/plain\n\n**Respuesta:** Texto encriptado para usar en URLs de tracking:\n- Product ID 1 ‚Üí M85DjiEk4XszqaUk94vETA\n- Product ID 2 ‚Üí hE6wiDK+BUKM2cSJgSshnQ\n- Product ID 3 ‚Üí T0jgZrjniEHPS7u1ZB9UkA\n\n**URL de ejemplo:** {{base_url}}/ads/{ENCRYPTED_VALUE}/?clickId=TRACK_001"
					},
					"response": []
				},
				{
					"name": "Generar Par√°metro para Product ID 5",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log('üîê Generando par√°metro para Product ID 5...');"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    let encryptedValue = pm.response.text();",
									"    console.log('‚úÖ Product ID 5 ‚Üí Par√°metro encriptado:', encryptedValue);",
									"    console.log('üîó URL funcional: {{base_url}}/ads/' + encryptedValue + '/?clickId=TRACK_' + Date.now());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "text/plain"
							},
							{
								"key": "user",
								"value": "xafra2-ads-encrytion3"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "5",
							"options": {
								"raw": {
									"language": "text"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/util/encryption",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"util",
								"encryption"
							]
						},
						"description": "Ejemplo de generaci√≥n de par√°metro encriptado para Product ID 5. Cambia el body por cualquier Product ID que necesites."
					},
					"response": []
				},
				{
					"name": "Obtener URL Base",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/util/get",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"util",
								"get"
							]
						},
						"description": "Obtener URL base del sistema"
					},
					"response": []
				}
			],
			"description": "Endpoints de utilidades para encriptaci√≥n y configuraci√≥n"
		},
		{
			"name": "üõí Sistema de Compras",
			"item": [
				{
					"name": "Health Check Compras",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/path/ping",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"path",
								"ping"
							]
						},
						"description": "Health check del sistema de compras"
					},
					"response": []
				},
				{
					"name": "Obtener Compra",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"customer_id\": \"CUST001\",\n    \"product_id\": \"PROD001\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/path/buy",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"path",
								"buy"
							]
						},
						"description": "Obtener informaci√≥n de compra existente"
					},
					"response": []
				},
				{
					"name": "Crear Nueva Compra",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"customer_id\": \"CUST001\",\n    \"product_id\": \"PROD001\",\n    \"amount\": 10.99,\n    \"currency\": \"USD\",\n    \"phone\": \"+50612345678\",\n    \"operator\": \"kolbi\",\n    \"country\": \"costa_rica\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/path/newbuy",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"path",
								"newbuy"
							]
						},
						"description": "Crear nueva compra en el sistema"
					},
					"response": []
				}
			],
			"description": "Endpoints para gesti√≥n de compras y transacciones"
		},
		{
			"name": "üîß Desarrollo y Debug",
			"item": [
				{
					"name": "Ver Headers HTTP",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "User-Agent",
								"value": "XAFRA-ADS-Testing/1.0"
							},
							{
								"key": "X-Test-Header",
								"value": "debug-mode"
							}
						],
						"url": {
							"raw": "{{base_url}}/adsDep/headers",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"adsDep",
								"headers"
							]
						},
						"description": "Ver todos los headers HTTP recibidos - √∫til para debugging"
					},
					"response": []
				},
				{
					"name": "Procesar Par√°metros Debug",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"param1\": \"value1\",\n    \"param2\": \"value2\",\n    \"debug\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/adsDep/p/TEST_PARAM",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"adsDep",
								"p",
								"TEST_PARAM"
							]
						},
						"description": "Procesar par√°metros en modo debug"
					},
					"response": []
				}
			],
			"description": "Endpoints para desarrollo, testing y debugging"
		},
		{
			"name": "üåê Web Interface",
			"item": [
				{
					"name": "P√°gina Principal",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "P√°gina principal de la aplicaci√≥n web"
					},
					"response": []
				}
			],
			"description": "Interface web de la aplicaci√≥n"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script que se ejecuta antes de cada request",
					"console.log('üöÄ Ejecutando request a XAFRA-ADS API');",
					"console.log('üåê Base URL:', pm.variables.get('base_url'));",
					"",
					"// Agregar timestamp a las requests",
					"pm.globals.set('request_timestamp', new Date().toISOString());"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script que se ejecuta despu√©s de cada response",
					"",
					"// Validaciones b√°sicas para todas las requests",
					"pm.test('‚úÖ Status code is success', function () {",
					"    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
					"});",
					"",
					"pm.test('‚ö° Response time is acceptable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(10000); // 10 segundos",
					"});",
					"",
					"// Log del resultado",
					"console.log('‚úÖ Response Status:', pm.response.status);",
					"console.log('‚è±Ô∏è Response Time:', pm.response.responseTime + 'ms');",
					"console.log('üìä Response Size:', pm.response.responseSize + ' bytes');"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://apis.xafra-ads.com",
			"description": "URL base de producci√≥n con dominio personalizado",
			"type": "string"
		},
		{
			"key": "base_url_cloudrun",
			"value": "https://xafra-ads-697203931362.us-central1.run.app",
			"description": "URL directa de Cloud Run (backup)",
			"type": "string"
		},
		{
			"key": "api_key",
			"value": "your_api_key_here",
			"description": "API Key para endpoints autenticados",
			"type": "string"
		},
		{
			"key": "environment",
			"value": "production",
			"description": "Ambiente actual (production/staging/development)",
			"type": "string"
		}
	]
}
